<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!-- NewPage -->
<html lang="en">
<head>
<!-- Generated by javadoc (1.8.0_31) on Mon Apr 18 21:07:08 UTC 2016 -->
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<title>WeakEntity (TridentSDK 0.4-SNAPSHOT API)</title>
<meta name="date" content="2016-04-18">
<link rel="stylesheet" type="text/css" href="../../../stylesheet.css" title="Style">
<script type="text/javascript" src="../../../script.js"></script>
</head>
<body>
<script type="text/javascript"><!--
    try {
        if (location.href.indexOf('is-external=true') == -1) {
            parent.document.title="WeakEntity (TridentSDK 0.4-SNAPSHOT API)";
        }
    }
    catch(err) {
    }
//-->
var methods = {"i0":10,"i1":9,"i2":9,"i3":10,"i4":10,"i5":10,"i6":10,"i7":10,"i8":9,"i9":10,"i10":9,"i11":10,"i12":9,"i13":9,"i14":9,"i15":10};
var tabs = {65535:["t0","All Methods"],1:["t1","Static Methods"],2:["t2","Instance Methods"],8:["t4","Concrete Methods"]};
var altColor = "altColor";
var rowColor = "rowColor";
var tableTab = "tableTab";
var activeTableTab = "activeTableTab";
</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="topNav"><a name="navbar.top">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.top" title="Skip navigation links">Skip navigation links</a></div>
<a name="navbar.top.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="class-use/WeakEntity.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../index-all.html">Index</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../../net/tridentsdk/util/Vector.html" title="class in net.tridentsdk.util"><span class="typeNameLink">Prev&nbsp;Class</span></a></li>
<li><a href="../../../net/tridentsdk/util/WeakEntity.CleaningIterator.html" title="class in net.tridentsdk.util"><span class="typeNameLink">Next&nbsp;Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../../index.html?net/tridentsdk/util/WeakEntity.html" target="_top">Frames</a></li>
<li><a href="WeakEntity.html" target="_top">No&nbsp;Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_top">
<li><a href="../../../allclasses-noframe.html">All&nbsp;Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_top");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li><a href="#nested.class.summary">Nested</a>&nbsp;|&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li>Constr&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li>Constr&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
<a name="skip.navbar.top">
<!--   -->
</a></div>
<!-- ========= END OF TOP NAVBAR ========= -->
<!-- ======== START OF CLASS DATA ======== -->
<div class="header">
<div class="subTitle">net.tridentsdk.util</div>
<h2 title="Class WeakEntity" class="title">Class WeakEntity&lt;T extends <a href="../../../net/tridentsdk/entity/Entity.html" title="interface in net.tridentsdk.entity">Entity</a>&gt;</h2>
</div>
<div class="contentContainer">
<ul class="inheritance">
<li><a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang">java.lang.Object</a></li>
<li>
<ul class="inheritance">
<li>net.tridentsdk.util.WeakEntity&lt;T&gt;</li>
</ul>
</li>
</ul>
<div class="description">
<ul class="blockList">
<li class="blockList">
<hr>
<br>
<pre><a href="http://docs.oracle.com/javase/7/docs/api/javax/annotation/concurrent.ThreadSafe.html?is-external=true" title="class or interface in javax.annotation">@ThreadSafe</a>
public final class <a href="../../../src-html/net/tridentsdk/util/WeakEntity.html#line.170">WeakEntity</a>&lt;T extends <a href="../../../net/tridentsdk/entity/Entity.html" title="interface in net.tridentsdk.entity">Entity</a>&gt;
extends <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang">Object</a></pre>
<div class="block">A reference to an entity

 <p>Three constructors are provided. In the case that the stored value comes from an <em>alien-source</em>, or any
 general situation where the value to be held by the WeakEntity is unknown and unspecified, the recommended factory
 method to use is <a href="../../../net/tridentsdk/util/WeakEntity.html#orEmpty-T-"><code>orEmpty(net.tridentsdk.entity.Entity)</code></a>. This prevents the creation of unnecessary instances
 of WeakEntity where the value is always going to <code>null</code>. Because this method always returns the same instance
 of a <code>null</code> holding WeakEntity, registration does not need to be executed, where registration means to place
 the reference into a queue which will be cleared once the entity has been removed. In this context, and alien method
 is: <em>"A method you call for which you have no control over the code, and further donâ€™t even know what the code
 does, other than the method signature</em> [...] <em>it could refer to calls to third party libraries</em>."</p>

 <p>Because entities are loaded with all of their data and AI, the removal of them entirely depends on the references
 left held to it. If the entity is technically removed by the server, but still held by a plugin, for example, then
 a memory leak will occur because the entity will never actually be removed. It is not updated for players, but the
 reference stays in memory, wasting computing power on a non-existent entity.</p>

 <p>Use this class to store a link or bridge to the reference of an entity. The storage of an instance of this class
 will only hold this class only, and the reference to the entity in this class may become <code>null</code> at any time,
 in which case is indicated by <a href="../../../net/tridentsdk/util/WeakEntity.html#isNull--"><code>isNull()</code></a> returning <code>true</code>.</p>

 <p>Much thought was put into the design of this class, especially if it should be made thread-safe. Because this is
 an internal change, it can be easily done without breaking the API. However, the decision was made to make this
 class
 thread-safe in order to preserve the fact that both the users of this API, including plugins and the server itself
 is concurrent. It would decrease the burden to handle this safely using the internal implementation rather than
 having the client code execute awkward constructs in order to keep consistency. This is OK for the implementation to
 perform, but because plugin authors may not always think about the concurrent nature of this API, it was done at the
 cost of performance to reduce bugs which are often difficult to find.</p>

 <p>This is the equivalent of <code>Optional</code> but for entities specifically, much like an
 optional which stores a <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/ref/WeakReference.html?is-external=true" title="class or interface in java.lang.ref"><code>WeakReference</code></a> of the specified property. While this class does use
 WeakReference to manage the references, other methods to safeguard the reference is also implemented, such as
 removal
 listeners.</p>

 <p>Internally, this class manages a queue of references which, in turn, are polled by a thread called
 <code>Trident - Reference Handler</code>. Every call to clear a specific reference also runs the mark/sweep collector,
 although it is invoked directly rather than using <a href="../../../net/tridentsdk/util/WeakEntity.html#runMarkSweep--"><code>runMarkSweep()</code></a>. The implementation of the collector may
 be
 found in the documentation for <a href="../../../net/tridentsdk/util/WeakEntity.html#runMarkSweep--"><code>runMarkSweep()</code></a>. Entities call
 <a href="../../../net/tridentsdk/util/WeakEntity.html#clearReferencesTo-net.tridentsdk.entity.Entity-"><code>clearReferencesTo(net.tridentsdk.entity.Entity)</code></a> when they are removed to purge old references to that
 entity
 after it has finished despawning. This method also runs the mark/sweep collector. This is only implemented as a
 safeguard behind <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/ref/WeakReference.html?is-external=true" title="class or interface in java.lang.ref"><code>WeakReference</code></a>, which is used to store the actual instance of the entity to be
 weakly referenced. The reference handling thread cleans up the entity after all the references have been cleared, as
 well as collecting any other obsolete references. This was done because WeakReference may allow the reference to be
 held longer than it has lived, in the case that the GC does not run, the reference handler will perform the
 necessary actions to make sure the entity is correctly nulled.</p>

 <p>Here are examples on the usage of this class.</p>

 <p>WeakEntity can and should be used when storing entities, such as players inside a collection or reference.</p>
 <pre><code>
     private final Map&lt;WeakEntity&lt;Player&gt;, Integer&gt; score =
         Maps.newHashMap();

     // Add player
     Player player = ...
     int playerScore = ...
     score.put(WeakEntity.of(player), playerScore);

     // Checking player
     for (WeakEntity&lt;Player&gt; weakEntity : score.keySet()) {
         // This is simply proof of concept, don't check if it is null
         // then try to obtain it
         // Or try to hide the player from himself/herself
         if (weakEntity.isNull())
             continue;
         weakEntity.obtain().hide(weakEntity);
     }
 </code></pre>

 <p>WeakEntity acts like an optional which can be used to eliminate the need to check for <code>null</code>.</p>
 <pre><code>
     // Finding the player
     // Don't do this in production-stage code, it doesn't work the way the name implies!
     public WeakEntity&lt;Bat&gt; findClosest(Player player, int range) {
         for (Entity entity : player.withinRange(range)) {
             if (entity instanceof Bat) {
                 // Unable to be null, so we use of(Entity)
                 // Instead of orEmpty(Entity)
                 return WeakEntity.of(entity);
             }
         }

         // No bats near the player, it's empty
         return WeakEntity.empty();
     }

     // Find a Bat closest to the player, or spawn a new one, and accelerate it upwards (just because)
     findClosest(player, 69)
         .or(EntityBuilder.create().build(TridentBat.class))
         .setVelocity(new Vector(0, 10, 0));
 </code></pre>

 <p>WeakEntity does not need to be instantiated to find in a collection.</p>
 <pre><code>
     Map&lt;WeakEntity&lt;Entity&gt;, Object&gt; map = Maps.newHashMap();
     ...
     Object o = map.get(WeakEntity.searchFor(entity));
 </code></pre>

 <p>Finally, WeakEntity can be used to find and prevent bugs which would otherwise cause NullPointerExceptions.</p>
 <pre><code>
     // Using it to find bugs
     // Oh, leave it here for a while until I implement a different method, then I'll come back to it
     WeakEntity&lt;Player&gt; weakEntity = WeakEntity.of(null);
     ...
     // I was smart and used obtain() instead of entity()
     weakEntity.obtain().hide();

     // Code errors

     // Go back to the line you found in the stacktrace
     // Looks like it was on the line that tried to obtain the entity
     // from a WeakEntity
     // We remember that we implemented a find player method later on

     // Final code
     WeakEntity&lt;Player&gt; weakEntity = WeakEntity.of(player());
 </code></pre></div>
<dl>
<dt><span class="simpleTagLabel">Since:</span></dt>
<dd>0.3-alpha-DP</dd>
<dt><span class="simpleTagLabel">Author:</span></dt>
<dd>The TridentSDK Team</dd>
</dl>
</li>
</ul>
</div>
<div class="summary">
<ul class="blockList">
<li class="blockList">
<!-- ======== NESTED CLASS SUMMARY ======== -->
<ul class="blockList">
<li class="blockList"><a name="nested.class.summary">
<!--   -->
</a>
<h3>Nested Class Summary</h3>
<table class="memberSummary" border="0" cellpadding="3" cellspacing="0" summary="Nested Class Summary table, listing nested classes, and an explanation">
<caption><span>Nested Classes</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Class and Description</th>
</tr>
<tr class="altColor">
<td class="colFirst"><code>static class&nbsp;</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../net/tridentsdk/util/WeakEntity.CleaningIterator.html" title="class in net.tridentsdk.util">WeakEntity.CleaningIterator</a>&lt;<a href="../../../net/tridentsdk/util/WeakEntity.CleaningIterator.html" title="type parameter in WeakEntity.CleaningIterator">E</a>&gt;</span></code>
<div class="block">An iterator for a collection holding <a href="../../../net/tridentsdk/util/WeakEntity.html" title="class in net.tridentsdk.util"><code>WeakEntity</code></a>s.</div>
</td>
</tr>
</table>
</li>
</ul>
<!-- ========== METHOD SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="method.summary">
<!--   -->
</a>
<h3>Method Summary</h3>
<table class="memberSummary" border="0" cellpadding="3" cellspacing="0" summary="Method Summary table, listing methods, and an explanation">
<caption><span id="t0" class="activeTableTab"><span>All Methods</span><span class="tabEnd">&nbsp;</span></span><span id="t1" class="tableTab"><span><a href="javascript:show(1);">Static Methods</a></span><span class="tabEnd">&nbsp;</span></span><span id="t2" class="tableTab"><span><a href="javascript:show(2);">Instance Methods</a></span><span class="tabEnd">&nbsp;</span></span><span id="t4" class="tableTab"><span><a href="javascript:show(8);">Concrete Methods</a></span><span class="tabEnd">&nbsp;</span></span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Method and Description</th>
</tr>
<tr id="i0" class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../net/tridentsdk/util/WeakEntity.html#clear--">clear</a></span>()</code>
<div class="block">This removes the reference to the entity in this particular instance of WeakEntity</div>
</td>
</tr>
<tr id="i1" class="rowColor">
<td class="colFirst"><code>static void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../net/tridentsdk/util/WeakEntity.html#clearReferencesTo-net.tridentsdk.entity.Entity-">clearReferencesTo</a></span>(<a href="../../../net/tridentsdk/entity/Entity.html" title="interface in net.tridentsdk.entity">Entity</a>&nbsp;entity)</code>
<div class="block">Removes the references of the entity from any WeakEntity instances which are non-null</div>
</td>
</tr>
<tr id="i2" class="altColor">
<td class="colFirst"><code>static &lt;T extends <a href="../../../net/tridentsdk/entity/Entity.html" title="interface in net.tridentsdk.entity">Entity</a>&gt;<br><a href="../../../net/tridentsdk/util/WeakEntity.html" title="class in net.tridentsdk.util">WeakEntity</a>&lt;T&gt;</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../net/tridentsdk/util/WeakEntity.html#empty--">empty</a></span>()</code>
<div class="block">Obtains a WeakEntity which holds a <code>null</code> referenced entity</div>
</td>
</tr>
<tr id="i3" class="rowColor">
<td class="colFirst"><code><a href="../../../net/tridentsdk/util/WeakEntity.html" title="type parameter in WeakEntity">T</a></code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../net/tridentsdk/util/WeakEntity.html#entity--">entity</a></span>()</code>
<div class="block">Obtains the instance of the referenced entity, or <code>null</code> if it has been dereferenced</div>
</td>
</tr>
<tr id="i4" class="altColor">
<td class="colFirst"><code>boolean</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../net/tridentsdk/util/WeakEntity.html#equals-java.lang.Object-">equals</a></span>(<a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang">Object</a>&nbsp;obj)</code></td>
</tr>
<tr id="i5" class="rowColor">
<td class="colFirst"><code><a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang">Object</a></code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../net/tridentsdk/util/WeakEntity.html#finder--">finder</a></span>()</code>
<div class="block">Instance method of <a href="../../../net/tridentsdk/util/WeakEntity.html#searchFor-net.tridentsdk.entity.Entity-"><code>searchFor(net.tridentsdk.entity.Entity)</code></a>.</div>
</td>
</tr>
<tr id="i6" class="altColor">
<td class="colFirst"><code>int</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../net/tridentsdk/util/WeakEntity.html#hashCode--">hashCode</a></span>()</code></td>
</tr>
<tr id="i7" class="rowColor">
<td class="colFirst"><code>boolean</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../net/tridentsdk/util/WeakEntity.html#isNull--">isNull</a></span>()</code>
<div class="block">Observes the reference to see if the entity is <code>null</code> or not accessible via the server anymore</div>
</td>
</tr>
<tr id="i8" class="altColor">
<td class="colFirst"><code>static &lt;E&gt;&nbsp;<a href="../../../net/tridentsdk/util/WeakEntity.CleaningIterator.html" title="class in net.tridentsdk.util">WeakEntity.CleaningIterator</a>&lt;E&gt;</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../net/tridentsdk/util/WeakEntity.html#iterate-java.util.Collection-">iterate</a></span>(<a href="http://docs.oracle.com/javase/7/docs/api/java/util/Collection.html?is-external=true" title="class or interface in java.util">Collection</a>&lt;E&gt;&nbsp;collect)</code>
<div class="block">Obtains an iterator which cleans elements in a collection which holds <a href="../../../net/tridentsdk/util/WeakEntity.html" title="class in net.tridentsdk.util"><code>WeakEntity</code></a>
 instances</div>
</td>
</tr>
<tr id="i9" class="rowColor">
<td class="colFirst"><code><a href="../../../net/tridentsdk/util/WeakEntity.html" title="type parameter in WeakEntity">T</a></code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../net/tridentsdk/util/WeakEntity.html#obtain--">obtain</a></span>()</code>
<div class="block">Obtains the referenced entity, but is fail-fast</div>
</td>
</tr>
<tr id="i10" class="altColor">
<td class="colFirst"><code>static &lt;T extends <a href="../../../net/tridentsdk/entity/Entity.html" title="interface in net.tridentsdk.entity">Entity</a>&gt;<br><a href="../../../net/tridentsdk/util/WeakEntity.html" title="class in net.tridentsdk.util">WeakEntity</a>&lt;T&gt;</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../net/tridentsdk/util/WeakEntity.html#of-T-">of</a></span>(T&nbsp;referencedEntity)</code>
<div class="block">Obtains a WeakEntity which holds the specified entity</div>
</td>
</tr>
<tr id="i11" class="rowColor">
<td class="colFirst"><code><a href="../../../net/tridentsdk/util/WeakEntity.html" title="type parameter in WeakEntity">T</a></code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../net/tridentsdk/util/WeakEntity.html#or-T-">or</a></span>(<a href="../../../net/tridentsdk/util/WeakEntity.html" title="type parameter in WeakEntity">T</a>&nbsp;fallback)</code>
<div class="block">Obtains the instance of the referenced entity, or, if it <a href="../../../net/tridentsdk/util/WeakEntity.html#isNull--"><code>isNull()</code></a>, then this method will return the
 specified fallback object, which must match the type of this object</div>
</td>
</tr>
<tr id="i12" class="altColor">
<td class="colFirst"><code>static &lt;T extends <a href="../../../net/tridentsdk/entity/Entity.html" title="interface in net.tridentsdk.entity">Entity</a>&gt;<br><a href="../../../net/tridentsdk/util/WeakEntity.html" title="class in net.tridentsdk.util">WeakEntity</a>&lt;T&gt;</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../net/tridentsdk/util/WeakEntity.html#orEmpty-T-">orEmpty</a></span>(T&nbsp;referencedEntity)</code>
<div class="block">Obtains a WeakEntity which is either a <a href="../../../net/tridentsdk/util/WeakEntity.html#empty--"><code>empty()</code></a> reference or a reference
 <a href="../../../net/tridentsdk/util/WeakEntity.html#of-T-"><code>of(net.tridentsdk.entity.Entity)</code></a>, depending on if the specified entity is <code>null</code> or
 non-<code>null</code>, respectively</div>
</td>
</tr>
<tr id="i13" class="rowColor">
<td class="colFirst"><code>static void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../net/tridentsdk/util/WeakEntity.html#runMarkSweep--">runMarkSweep</a></span>()</code>
<div class="block">Forces the reference handler thread to run the <code>null</code> or garbage reference collection cycle and reclaim
 memory lost by those references</div>
</td>
</tr>
<tr id="i14" class="altColor">
<td class="colFirst"><code>static <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang">Object</a></code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../net/tridentsdk/util/WeakEntity.html#searchFor-net.tridentsdk.entity.Entity-">searchFor</a></span>(<a href="../../../net/tridentsdk/entity/Entity.html" title="interface in net.tridentsdk.entity">Entity</a>&nbsp;entity)</code>
<div class="block">Provides an object which possesses the matching properties for a WeakEntity</div>
</td>
</tr>
<tr id="i15" class="rowColor">
<td class="colFirst"><code><a href="http://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a></code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../net/tridentsdk/util/WeakEntity.html#toString--">toString</a></span>()</code></td>
</tr>
</table>
<ul class="blockList">
<li class="blockList"><a name="methods.inherited.from.class.java.lang.Object">
<!--   -->
</a>
<h3>Methods inherited from class&nbsp;java.lang.<a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang">Object</a></h3>
<code><a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#clone--" title="class or interface in java.lang">clone</a>, <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#finalize--" title="class or interface in java.lang">finalize</a>, <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#getClass--" title="class or interface in java.lang">getClass</a>, <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#notify--" title="class or interface in java.lang">notify</a>, <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#notifyAll--" title="class or interface in java.lang">notifyAll</a>, <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#wait--" title="class or interface in java.lang">wait</a>, <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#wait-long-" title="class or interface in java.lang">wait</a>, <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#wait-long-int-" title="class or interface in java.lang">wait</a></code></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
<div class="details">
<ul class="blockList">
<li class="blockList">
<!-- ============ METHOD DETAIL ========== -->
<ul class="blockList">
<li class="blockList"><a name="method.detail">
<!--   -->
</a>
<h3>Method Detail</h3>
<a name="empty--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>empty</h4>
<pre>public static&nbsp;&lt;T extends <a href="../../../net/tridentsdk/entity/Entity.html" title="interface in net.tridentsdk.entity">Entity</a>&gt;&nbsp;<a href="../../../net/tridentsdk/util/WeakEntity.html" title="class in net.tridentsdk.util">WeakEntity</a>&lt;T&gt;&nbsp;<a href="../../../src-html/net/tridentsdk/util/WeakEntity.html#line.198">empty</a>()</pre>
<div class="block">Obtains a WeakEntity which holds a <code>null</code> referenced entity

 <p>This method does not produce a new object. The instance of an empty WeakEntity is held in a <code>static</code>
 field inside this class.</p></div>
<dl>
<dt><span class="paramLabel">Type Parameters:</span></dt>
<dd><code>T</code> - the type of entity to hold <code>null</code> for</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>a WeakEntity which holds <code>null</code></dd>
</dl>
</li>
</ul>
<a name="of-net.tridentsdk.entity.Entity-">
<!--   -->
</a><a name="of-T-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>of</h4>
<pre>public static&nbsp;&lt;T extends <a href="../../../net/tridentsdk/entity/Entity.html" title="interface in net.tridentsdk.entity">Entity</a>&gt;&nbsp;<a href="../../../net/tridentsdk/util/WeakEntity.html" title="class in net.tridentsdk.util">WeakEntity</a>&lt;T&gt;&nbsp;<a href="../../../src-html/net/tridentsdk/util/WeakEntity.html#line.216">of</a>(T&nbsp;referencedEntity)</pre>
<div class="block">Obtains a WeakEntity which holds the specified entity

 <p>The entity which is specified will become <code>null</code> when it is dereferenced from the server.</p>

 <p>This may be used in the place of <a href="../../../net/tridentsdk/util/WeakEntity.html#orEmpty-T-"><code>orEmpty(net.tridentsdk.entity.Entity)</code></a> if creation of a new
 WeakEntity for a <code>null</code> entity is OK. In other words, this is a fast-path (albeit the fact that the
 difference in performance is negligible in comparison with creation overhead and memory) for the
 <a href="../../../net/tridentsdk/util/WeakEntity.html#orEmpty-T-"><code>orEmpty(net.tridentsdk.entity.Entity)</code></a>.</p></div>
<dl>
<dt><span class="paramLabel">Type Parameters:</span></dt>
<dd><code>T</code> - the type of entity to hold</dd>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>referencedEntity</code> - the entity to hold until it is removed</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>a WeakEntity which holds the entity until it becomes <code>null</code></dd>
</dl>
</li>
</ul>
<a name="orEmpty-net.tridentsdk.entity.Entity-">
<!--   -->
</a><a name="orEmpty-T-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>orEmpty</h4>
<pre>public static&nbsp;&lt;T extends <a href="../../../net/tridentsdk/entity/Entity.html" title="interface in net.tridentsdk.entity">Entity</a>&gt;&nbsp;<a href="../../../net/tridentsdk/util/WeakEntity.html" title="class in net.tridentsdk.util">WeakEntity</a>&lt;T&gt;&nbsp;<a href="../../../src-html/net/tridentsdk/util/WeakEntity.html#line.238">orEmpty</a>(T&nbsp;referencedEntity)</pre>
<div class="block">Obtains a WeakEntity which is either a <a href="../../../net/tridentsdk/util/WeakEntity.html#empty--"><code>empty()</code></a> reference or a reference
 <a href="../../../net/tridentsdk/util/WeakEntity.html#of-T-"><code>of(net.tridentsdk.entity.Entity)</code></a>, depending on if the specified entity is <code>null</code> or
 non-<code>null</code>, respectively

 <p>If the returned WeakEntity holds <code>null</code>, and is equivalent to <a href="../../../net/tridentsdk/util/WeakEntity.html#empty--"><code>empty()</code></a>, then no instance of
 WeakEntity was created.</p>

 <p>If the referenced entity is <em>known</em> to be <code>null</code>, then do not use this method. Although it is
 still correct, if it is not possible for it to be <code>null</code>, use an <a href="../../../net/tridentsdk/util/WeakEntity.html#empty--"><code>empty()</code></a> WeakEntity.</p></div>
<dl>
<dt><span class="paramLabel">Type Parameters:</span></dt>
<dd><code>T</code> - the type of entity to hold</dd>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>referencedEntity</code> - the entity to obtain the reference for</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>a WeakEntity which holds the specified entity, or <a href="../../../net/tridentsdk/util/WeakEntity.html#empty--"><code>empty()</code></a> if the specified entity to reference
 is <code>null</code></dd>
</dl>
</li>
</ul>
<a name="clearReferencesTo-net.tridentsdk.entity.Entity-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>clearReferencesTo</h4>
<pre><a href="../../../net/tridentsdk/docs/InternalUseOnly.html" title="annotation in net.tridentsdk.docs">@InternalUseOnly</a>
public static&nbsp;void&nbsp;<a href="../../../src-html/net/tridentsdk/util/WeakEntity.html#line.254">clearReferencesTo</a>(<a href="../../../net/tridentsdk/entity/Entity.html" title="interface in net.tridentsdk.entity">Entity</a>&nbsp;entity)
                                               throws <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/IllegalAccessException.html?is-external=true" title="class or interface in java.lang">IllegalAccessException</a></pre>
<div class="block">Removes the references of the entity from any WeakEntity instances which are non-null

 <p>This method was meant to be used only for the implementation. The calling of this method by a non-Trident
 class has no effect.</p></div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>entity</code> - the entity to dereference and clear from WeakEntity</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="http://docs.oracle.com/javase/7/docs/api/java/lang/IllegalAccessException.html?is-external=true" title="class or interface in java.lang">IllegalAccessException</a></code> - when the caller is not Trident</dd>
</dl>
</li>
</ul>
<a name="searchFor-net.tridentsdk.entity.Entity-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>searchFor</h4>
<pre>public static&nbsp;<a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang">Object</a>&nbsp;<a href="../../../src-html/net/tridentsdk/util/WeakEntity.html#line.276">searchFor</a>(<a href="../../../net/tridentsdk/entity/Entity.html" title="interface in net.tridentsdk.entity">Entity</a>&nbsp;entity)</pre>
<div class="block">Provides an object which possesses the matching properties for a WeakEntity

 <p>This is needed when obtaining a WeakEntity from a collection. The returned object overrides equals and
 hashCode, as well as toString to mimic the actual referenced entity. If the reference is <code>null</code>, then no
 new object is created and the method returns a cached version of the object. Because the WeakEntity's original
 implementation also delegates the same identifying functions to the reference, this is the preferred way to find
 a WeakEntity from a collection or to match with a stored version.</p>

 <p>This method never returns null. If there is no entity which is known to exist with a WeakEntity, then the
 returned object <code>searchFor(null).equals(null)</code>.</p></div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>entity</code> - the entity to get the finder for</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>an object that possesses the properties of the entity so that they match up with an WeakEntity containing
 the same entity</dd>
</dl>
</li>
</ul>
<a name="iterate-java.util.Collection-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>iterate</h4>
<pre>public static&nbsp;&lt;E&gt;&nbsp;<a href="../../../net/tridentsdk/util/WeakEntity.CleaningIterator.html" title="class in net.tridentsdk.util">WeakEntity.CleaningIterator</a>&lt;E&gt;&nbsp;<a href="../../../src-html/net/tridentsdk/util/WeakEntity.html#line.310">iterate</a>(<a href="http://docs.oracle.com/javase/7/docs/api/java/util/Collection.html?is-external=true" title="class or interface in java.util">Collection</a>&lt;E&gt;&nbsp;collect)</pre>
<div class="block">Obtains an iterator which cleans elements in a collection which holds <a href="../../../net/tridentsdk/util/WeakEntity.html" title="class in net.tridentsdk.util"><code>WeakEntity</code></a>
 instances

 <p>This method is recommended for usage with any collection which holds instances of
 <a href="../../../net/tridentsdk/util/WeakEntity.html" title="class in net.tridentsdk.util"><code>WeakEntity</code></a>, as although it may reduce memory leaks caused by resources being held
 after a referencing class is not fully unloaded, one WeakEntity is referenced is several places internally.</p>

 <p>This supports all collections that are part of the Java Collections Framework. In particular, collections
 which have 2 keys and obtain entry sets with a <a href="../../../net/tridentsdk/util/WeakEntity.html" title="class in net.tridentsdk.util"><code>WeakEntity</code></a> in the key, value, or both
 are supported by this iterator.</p>

 <p>Normal use case:
 <pre><code>
     List&lt;WeakEntity&lt;Player&gt;&gt; list = Lists.newArrayList();

     for (WeakEntity&lt;Player&gt; weakEntity : WeakEntity.iterate(list)) {
         // Obtain can be used here
     }
 </code></pre></p>

 <p>No support is provided for iteration-then-remove, as the semantics of the iterator precede checks for nullity
 before the element is returned.</p></div>
<dl>
<dt><span class="paramLabel">Type Parameters:</span></dt>
<dd><code>E</code> - the element type for the iterator</dd>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>collect</code> - the collection to clean of nulled references</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>the iterator which cleans a collection possibly containing <code>null</code> references to weak entities</dd>
</dl>
</li>
</ul>
<a name="runMarkSweep--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>runMarkSweep</h4>
<pre>public static&nbsp;void&nbsp;<a href="../../../src-html/net/tridentsdk/util/WeakEntity.html#line.376">runMarkSweep</a>()</pre>
<div class="block">Forces the reference handler thread to run the <code>null</code> or garbage reference collection cycle and reclaim
 memory lost by those references

 <p>This runs the mark sweeping strategy employed by the reference handler. Previous references are swept from
 the session and the thread continues to mark the <code>null</code> references. They are placed into a collection
 until the sweeping completes. When this step does complete, the collection is checked, then the references are
 purged from the reference queue.</p>

 <p>Unlike Java's default GC implementation, this method is strongly bound. This always succeeds in running the
 collection cycle.</p></div>
</li>
</ul>
<a name="isNull--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>isNull</h4>
<pre>public&nbsp;boolean&nbsp;<a href="../../../src-html/net/tridentsdk/util/WeakEntity.html#line.386">isNull</a>()</pre>
<div class="block">Observes the reference to see if the entity is <code>null</code> or not accessible via the server anymore</div>
<dl>
<dt><span class="returnLabel">Returns:</span></dt>
<dd><code>true</code> to indicate the entity is removed and cannot be further referenced, in which case the
 instance of this object should also become <code>null</code></dd>
</dl>
</li>
</ul>
<a name="or-net.tridentsdk.entity.Entity-">
<!--   -->
</a><a name="or-T-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>or</h4>
<pre>public&nbsp;<a href="../../../net/tridentsdk/util/WeakEntity.html" title="type parameter in WeakEntity">T</a>&nbsp;<a href="../../../src-html/net/tridentsdk/util/WeakEntity.html#line.400">or</a>(<a href="../../../net/tridentsdk/util/WeakEntity.html" title="type parameter in WeakEntity">T</a>&nbsp;fallback)</pre>
<div class="block">Obtains the instance of the referenced entity, or, if it <a href="../../../net/tridentsdk/util/WeakEntity.html#isNull--"><code>isNull()</code></a>, then this method will return the
 specified fallback object, which must match the type of this object

 <p>The provided fallback should not be <code>null</code>. This is allowed, and is still correct, however, a more
 effective strategy is to use <a href="../../../net/tridentsdk/util/WeakEntity.html#entity--"><code>entity()</code></a> instead.</p></div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>fallback</code> - the entity to return in place of the reference in the case that the reference is <code>null</code></dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>the entity if non-<code>null</code>, or the fallback if it is</dd>
</dl>
</li>
</ul>
<a name="entity--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>entity</h4>
<pre>public&nbsp;<a href="../../../net/tridentsdk/util/WeakEntity.html" title="type parameter in WeakEntity">T</a>&nbsp;<a href="../../../src-html/net/tridentsdk/util/WeakEntity.html#line.410">entity</a>()</pre>
<div class="block">Obtains the instance of the referenced entity, or <code>null</code> if it has been dereferenced</div>
<dl>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>the entity which this reference points to, or <code>null</code> if the entity no longer exists on the server</dd>
</dl>
</li>
</ul>
<a name="obtain--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>obtain</h4>
<pre>public&nbsp;<a href="../../../net/tridentsdk/util/WeakEntity.html" title="type parameter in WeakEntity">T</a>&nbsp;<a href="../../../src-html/net/tridentsdk/util/WeakEntity.html#line.423">obtain</a>()</pre>
<div class="block">Obtains the referenced entity, but is fail-fast

 <p>This method will throw an <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/IllegalStateException.html?is-external=true" title="class or interface in java.lang"><code>IllegalStateException</code></a> if the referenced entity is <code>null</code>.
 Usually, this should be used for debugging purposes, but can be used as a marker in the case that something
 within the code goes wrong.</p></div>
<dl>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>the referenced entity, can <strong>never</strong> be <code>null</code></dd>
</dl>
</li>
</ul>
<a name="clear--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>clear</h4>
<pre>public&nbsp;void&nbsp;<a href="../../../src-html/net/tridentsdk/util/WeakEntity.html#line.436">clear</a>()</pre>
<div class="block">This removes the reference to the entity in this particular instance of WeakEntity

 <p>If the referenced entity is <code>null</code> already, no changes will take effect. The call of this method also
 has <em>happens-before</em> consistency to any subsequent inspection calls to this WeakEntity.</p></div>
</li>
</ul>
<a name="finder--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>finder</h4>
<pre>public&nbsp;<a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang">Object</a>&nbsp;<a href="../../../src-html/net/tridentsdk/util/WeakEntity.html#line.448">finder</a>()</pre>
<div class="block">Instance method of <a href="../../../net/tridentsdk/util/WeakEntity.html#searchFor-net.tridentsdk.entity.Entity-"><code>searchFor(net.tridentsdk.entity.Entity)</code></a>. See that method for the documentation and
 implementation.

 <p>This method still internally polls the reference queue for the entity's cached finder.</p></div>
<dl>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>an Object which can be used to find WeakEntities in a collection</dd>
</dl>
</li>
</ul>
<a name="equals-java.lang.Object-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>equals</h4>
<pre>public&nbsp;boolean&nbsp;<a href="../../../src-html/net/tridentsdk/util/WeakEntity.html#line.456">equals</a>(<a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang">Object</a>&nbsp;obj)</pre>
<dl>
<dt><span class="overrideSpecifyLabel">Overrides:</span></dt>
<dd><code><a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#equals-java.lang.Object-" title="class or interface in java.lang">equals</a></code>&nbsp;in class&nbsp;<code><a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang">Object</a></code></dd>
</dl>
</li>
</ul>
<a name="hashCode--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>hashCode</h4>
<pre>public&nbsp;int&nbsp;<a href="../../../src-html/net/tridentsdk/util/WeakEntity.html#line.465">hashCode</a>()</pre>
<dl>
<dt><span class="overrideSpecifyLabel">Overrides:</span></dt>
<dd><code><a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#hashCode--" title="class or interface in java.lang">hashCode</a></code>&nbsp;in class&nbsp;<code><a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang">Object</a></code></dd>
</dl>
</li>
</ul>
<a name="toString--">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>toString</h4>
<pre>public&nbsp;<a href="http://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;<a href="../../../src-html/net/tridentsdk/util/WeakEntity.html#line.474">toString</a>()</pre>
<dl>
<dt><span class="overrideSpecifyLabel">Overrides:</span></dt>
<dd><code><a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#toString--" title="class or interface in java.lang">toString</a></code>&nbsp;in class&nbsp;<code><a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang">Object</a></code></dd>
</dl>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
</div>
<!-- ========= END OF CLASS DATA ========= -->
<!-- ======= START OF BOTTOM NAVBAR ====== -->
<div class="bottomNav"><a name="navbar.bottom">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.bottom" title="Skip navigation links">Skip navigation links</a></div>
<a name="navbar.bottom.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="class-use/WeakEntity.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../index-all.html">Index</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../../net/tridentsdk/util/Vector.html" title="class in net.tridentsdk.util"><span class="typeNameLink">Prev&nbsp;Class</span></a></li>
<li><a href="../../../net/tridentsdk/util/WeakEntity.CleaningIterator.html" title="class in net.tridentsdk.util"><span class="typeNameLink">Next&nbsp;Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../../index.html?net/tridentsdk/util/WeakEntity.html" target="_top">Frames</a></li>
<li><a href="WeakEntity.html" target="_top">No&nbsp;Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_bottom">
<li><a href="../../../allclasses-noframe.html">All&nbsp;Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_bottom");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li><a href="#nested.class.summary">Nested</a>&nbsp;|&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li>Constr&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li>Constr&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
<a name="skip.navbar.bottom">
<!--   -->
</a></div>
<!-- ======== END OF BOTTOM NAVBAR ======= -->
<p class="legalCopy"><small>Copyright &#169; 2016. All rights reserved.</small></p>
</body>
</html>
